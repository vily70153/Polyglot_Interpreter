# ü¶Ä Polyglot Interpreter (Rust)

–¶–µ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä/—ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –≤–ª–∞—Å–Ω–æ—ó –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, –Ω–∞–ø–∏—Å–∞–Ω–∏–π –Ω–∞ **Rust**.

–ì–æ–ª–æ–≤–Ω–∞ –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç—É ‚Äî **Database-Driven Lexer**. –ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ (keywords) —Ç–∞ –ª–µ–∫—Å–µ–º–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ –∫–æ–¥ —Ä—ñ–∑–Ω–∏–º–∏ –º–æ–≤–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é —Ç–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é) –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ, —ñ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä —Å–ø—Ä–∏–π–º–∞—Ç–∏–º–µ —ó—Ö —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ –∑–∞–≤–¥—è–∫–∏ —Å–∏—Å—Ç–µ–º—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö ID.

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

  * **–ú—É–ª—å—Ç–∏–º–æ–≤–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**: –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ UA (`–∑–º—ñ–Ω–Ω–∞`, `—Ñ—É–Ω–∫—Ü—ñ—è`) —Ç–∞ EN (`let`, `fn`) –æ–¥–Ω–æ—á–∞—Å–Ω–æ.
  * **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**:
      * **Lexer**: –¢–æ–∫–µ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö –∑ –ë–î (MySQL/SQLite).
      * **Parser**: –ü–æ–±—É–¥–æ–≤–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ (AST) –Ω–∞ –æ—Å–Ω–æ–≤—ñ ID —Ç–æ–∫–µ–Ω—ñ–≤ (–Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –º–æ–≤–∏ –≤–≤–µ–¥–µ–Ω–Ω—è).
  * **–¢–∏–ø—ñ–∑–∞—Ü—ñ—è**: –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤ (`int`, `float`, `string`) —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (`struct`/`class`).
  * **–õ–æ–≥—É–≤–∞–Ω–Ω—è**: –î–µ—Ç–∞–ª—å–Ω–µ —Ç—Ä–∞—Å—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –ø–∞—Ä—Å–∏–Ω–≥—É —á–µ—Ä–µ–∑ `tracing`.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

  * **–ú–æ–≤–∞**: Rust ü¶Ä
  * **–ë–î**: MySQL (–∞–±–æ SQLite –¥–ª—è –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ)
  * **–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏**:
      * `mysql` / `rusqlite` - —Ä–æ–±–æ—Ç–∞ –∑ –ë–î
      * `tokio` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å
      * `tracing` - –ª–æ–≥—É–≤–∞–Ω–Ω—è
      * `dotenvy` - –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

## üöÄ –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É

–ó–∞–≤–¥—è–∫–∏ –ø—Ä–∏–≤'—è–∑—Ü—ñ –¥–æ ID —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, –æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –∫–æ–¥—É –∫–æ–º–ø—ñ–ª—é—é—Ç—å—Å—è –≤ –æ–¥–Ω–∞–∫–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É AST:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ üá∫üá¶

```rust
—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ User {
    id: —Ü—ñ–ª–µ,
    name: —Ä—è–¥–æ–∫
}

—Ñ—É–Ω–∫—Ü—ñ—è main() {
    –∑–º—ñ–Ω–Ω–∞ x = 10 + 50;
}
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: English üá∫üá∏

```rust
struct User {
    id: int,
    name: string
}

function main() {
    let x = 10 + 50;
}
```

## ‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### 1\. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone https://github.com/your-username/your-project-name.git
cd your-project-name
```

### 2\. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–∞–∑–∏ –î–∞–Ω–∏—Ö

–ü—Ä–æ–µ–∫—Ç –≤–∏–º–∞–≥–∞—î –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ç–∞–±–ª–∏—Ü—å `AllLexemsTBL` —Ç–∞ `StdLexemeTBL`.
–í–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π SQL —Å–∫—Ä–∏–ø—Ç —É –≤–∞—à—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö:

\<details\>
\<summary\>üìÇ –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ SQL —Å—Ö–µ–º—É (–Ω–∞—Ç–∏—Å–Ω–∏ —Ç—É—Ç)\</summary\>

```sql
CREATE TABLE StdLexemeTBL (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(64) UNIQUE NOT NULL,
    lexem_type VARCHAR(64) NOT NULL
);

CREATE TABLE AllLexemsTBL (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    lang_name VARCHAR(64) NOT NULL,
    lexem VARCHAR(128) NOT NULL,
    std_lexem INT UNSIGNED NOT NULL,
    FOREIGN KEY (std_lexem) REFERENCES StdLexemeTBL(id)
);

-- –ë–∞–∑–æ–≤—ñ —Ç–∏–ø–∏ —Ç–∞ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞
INSERT INTO StdLexemeTBL (id, name, lexem_type) VALUES 
(53, 'let', 'Keyword'),
(46, 'function', 'Keyword'),
(48, 'struct', 'Keyword'),
(71, 'int_type', 'Type'),
(13, '+', 'Operator'),
(33, '=', 'Operator');
-- –î–æ–¥–∞–π—Ç–µ —ñ–Ω—à—ñ –ª–µ–∫—Å–µ–º–∏ –∑–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
```

\</details\>

### 3\. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ—Ç–æ—á–µ–Ω–Ω—è (.env)

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

```env
DATABASE_URL=mysql://user:password@localhost:3306/your_db_name
RUST_LOG=info
```

### 4\. –ó–∞–ø—É—Å–∫ (–ø–æ–∫–∏ —â–æ)

```bash
cargo run
```

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

  * `src/db` ‚Äî –õ–æ–≥—ñ–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è –ª–µ–∫—Å–µ–º.
  * `src/lexer` ‚Äî –¢–æ–∫–µ–Ω—ñ–∑–∞—Ç–æ—Ä (—Ä–æ–∑–±–∏–≤–∞—î —Ç–µ–∫—Å—Ç –Ω–∞ —Ç–æ–∫–µ–Ω–∏, –∑–≤–µ—Ä—Ç–∞—é—á–∏—Å—å –¥–æ –ë–î).
  * `src/ast` ‚Äî –ü–∞—Ä—Å–µ—Ä (–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –ø–æ—Ç—ñ–∫ —Ç–æ–∫–µ–Ω—ñ–≤ —É –¥–µ—Ä–µ–≤–æ AST).
  * `src/main.rs` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É.

## üìù TODO / –ü–ª–∞–Ω–∏

  - [x] –ë–∞–∑–æ–≤–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∑–º—ñ–Ω–Ω–∏—Ö —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π
  - [x] –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä
  - [ ] –ú—ñ–≥—Ä–∞—Ü—ñ—è –Ω–∞ Embedded DB (SQLite) –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –¥–∏—Å—Ç—Ä–∏–±—É—Ü—ñ—ó
  - [ ] –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –º–∞—Å–∏–≤—ñ–≤
  - [ ] –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ First Class —Ñ—É–Ω–∫—Ü—ñ–π
  - [ ] –Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∫–æ–¥—É
  - [ ] –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–æ–Ω—Ñ—ñ–≥ .toml —Ñ–∞–π–ª

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è –ø—ñ–¥ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é MIT.
